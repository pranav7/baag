#!/bin/bash

# Find the script's actual location (resolving symlinks)
SCRIPT_PATH="$(readlink -f "$0")"
SCRIPT_DIR="$(dirname "$SCRIPT_PATH")"
PROJECT_ROOT="$(dirname "$SCRIPT_DIR")"

# Change to project directory and run with local zx
cd "$PROJECT_ROOT" || exit 1

# Check if node_modules exists
if [ ! -d "node_modules" ]; then
    echo "Error: node_modules not found. Running npm install..."
    npm install
fi

# Run the actual baag script with zx from node_modules
exec npx zx "$PROJECT_ROOT/bin/baag" "$@"